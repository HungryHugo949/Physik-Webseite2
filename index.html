Hier ist der vollständig überarbeitete Code mit allen funktionierenden Aufgaben, Bildern und Farben:

```html
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Energie verstehen</title>
  <style>
    /* === CSS-START === */
    /* Grundlegende Styles */
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f5f7fa;
      color: #333;
      line-height: 1.6;
    }
    
    /* Navigation */
    #navbar {
      background-color: #1976d2;
      padding: 12px 20px;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    #navbar ul {
      list-style: none;
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      padding: 0;
      margin: 0;
      overflow-x: auto;
    }
    
    #navbar a {
      color: white;
      text-decoration: none;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 4px;
      transition: background-color 0.3s;
    }
    
    #navbar a:hover {
      background-color: #1565c0;
    }
    
    /* Header */
    .hero {
      background: linear-gradient(135deg, #64b5f6, #42a5f5);
      color: white;
      padding: 60px 20px;
      text-align: center;
      margin-bottom: 30px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    
    .hero h1 {
      margin: 0;
      font-size: 2.5em;
    }
    
    .hero p {
      margin: 10px 0 0;
      font-size: 1.2em;
    }
    
    /* Hauptinhaltsbereich */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    /* Abschnitte */
    section {
      background: white;
      border-radius: 8px;
      padding: 25px;
      margin-bottom: 30px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      border-left: 5px solid #42a5f5;
    }
    
    h2 {
      color: #1976d2;
      margin-top: 0;
      padding-bottom: 10px;
      border-bottom: 2px solid #e0e0e0;
    }
    
    h3 {
      color: #424242;
      margin-top: 25px;
    }
    
    /* Infoboxen */
    .infobox {
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    
    .infobox.orange {
      background-color: #fff3e0;
      border-left: 5px solid #ffa000;
    }
    
    .infobox.green {
      background-color: #e8f5e9;
      border-left: 5px solid #43a047;
    }
    
    .infobox.blue {
      background-color: #e3f2fd;
      border-left: 5px solid #2196f3;
    }
    
    /* Buttons */
    .quiz-btn {
      display: inline-block;
      padding: 10px 15px;
      margin: 5px;
      background-color: #42a5f5;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      transition: background-color 0.3s;
    }
    
    .quiz-btn:hover {
      background-color: #1e88e5;
    }
    
    .quiz-btn.correct {
      background-color: #4caf50;
    }
    
    .quiz-btn.incorrect {
      background-color: #f44336;
    }
    
    .quiz-auswerten-btn {
      background-color: #ff9800;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      margin-top: 15px;
      transition: background-color 0.3s;
    }
    
    .quiz-auswerten-btn:hover {
      background-color: #fb8c00;
    }
    
    /* Feedbackboxen */
    .feedback-box {
      padding: 15px;
      border-radius: 4px;
      margin-top: 15px;
      font-weight: bold;
    }
    
    .feedback-correct {
      background-color: #c8e6c9;
      color: #2e7d32;
    }
    
    .feedback-incorrect {
      background-color: #ffcdd2;
      color: #c62828;
    }
    
    /* Drag & Drop */
    .drag-container {
      margin: 20px 0;
    }
    
    .drag-items {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 15px;
    }
    
    .drag {
      padding: 10px 15px;
      background-color: #e3f2fd;
      border: 2px solid #bbdefb;
      border-radius: 4px;
      cursor: grab;
      transition: transform 0.2s;
    }
    
    .drag:hover {
      transform: translateY(-2px);
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .drop-area {
      display: flex;
      gap: 20px;
      margin-top: 15px;
    }
    
    .drop-zone {
      flex: 1;
      min-height: 100px;
      border: 2px dashed #90a4ae;
      border-radius: 8px;
      padding: 15px;
      background-color: #f5f5f5;
      transition: background-color 0.3s;
    }
    
    .drop-zone.highlight {
      background-color: #e0f7fa;
      border-color: #4db6ac;
    }
    
    .drag-result {
      background-color: #c8e6c9;
      padding: 8px 12px;
      border-radius: 4px;
      margin: 5px 0;
    }
    
    /* Slider */
    .slider-box {
      margin: 20px 0;
    }
    
    input[type="range"] {
      width: 100%;
      margin: 10px 0;
    }
    
    /* Temperaturanzeige */
    .temperaturanzeige {
      margin: 20px 0;
    }
    
    .tempBarContainer {
      width: 100%;
      height: 30px;
      background-color: #eceff1;
      border-radius: 15px;
      overflow: hidden;
      margin-top: 10px;
    }
    
    #tempFuellung {
      height: 100%;
      background: linear-gradient(90deg, #ff9800, #f44336);
      width: 70%;
      transition: width 0.5s;
    }
    
    #explosionswarnung {
      background-color: #ffebee;
      color: #c62828;
      padding: 10px;
      border-radius: 4px;
      margin-top: 10px;
      display: none;
    }
    
    /* Bilder */
    .bildgross {
      width: 100%;
      max-width: 600px;
      height: auto;
      border-radius: 8px;
      margin: 15px 0;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .entropie-alltag-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    
    .entropie-bild {
      text-align: center;
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .entropie-bild img {
      width: 100%;
      height: 150px;
      object-fit: cover;
      border-radius: 4px;
      margin-bottom: 10px;
    }
    
    /* Zuordnungstabelle */
    .zuordnungs-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    
    .zuordnungs-kategorie {
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .zuordnungs-kategorie h4 {
      margin-top: 0;
      color: #1976d2;
    }
    
    .checkboxen {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    /* Balkendiagramm */
    .balkendiagramm-container {
      margin: 20px 0;
    }
    
    .jahr-auswahl {
      margin-bottom: 15px;
    }
    
    .balken-eintrag {
      display: flex;
      align-items: center;
      margin: 10px 0;
    }
    
    .balken-eintrag span {
      width: 100px;
      font-weight: bold;
    }
    
    .balken {
      flex-grow: 1;
      height: 25px;
      background-color: #eceff1;
      border-radius: 4px;
      overflow: hidden;
      margin: 0 10px;
    }
    
    .balken-haushalte {
      background-color: #4CAF50;
      height: 100%;
      width: 30%;
    }
    
    .balken-verkehr {
      background-color: #FF9800;
      height: 100%;
      width: 25%;
    }
    
    .balken-industrie {
      background-color: #2196F3;
      height: 100%;
      width: 35%;
    }
    
    .balken-gewerbe {
      background-color: #9C27B0;
      height: 100%;
      width: 10%;
    }
    
    /* Karten */
    .karte {
      height: 400px;
      border-radius: 8px;
      margin: 20px 0;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    /* Verbrauchsrechner */
    .verbrauch-formular {
      display: grid;
      grid-template-columns: 1fr;
      gap: 15px;
      margin: 20px 0;
    }
    
    .verbrauch-formular label {
      display: block;
    }
    
    .verbrauch-formular input {
      width: 100%;
      padding: 8px;
      border: 1px solid #b0bec5;
      border-radius: 4px;
      margin-top: 5px;
    }
    
    #verbrauchErgebnis {
      background-color: #e3f2fd;
      padding: 15px;
      border-radius: 8px;
      margin-top: 20px;
    }
    
    /* Footer */
    footer {
      background-color: #263238;
      color: white;
      text-align: center;
      padding: 20px;
      margin-top: 50px;
    }
    
    /* Responsive Anpassungen */
    @media (max-width: 768px) {
      .drop-area {
        flex-direction: column;
      }
      
      .hero {
        padding: 40px 15px;
      }
      
      section {
        padding: 20px 15px;
      }
    }
    /* === CSS-ENDE === */
  </style>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
  <!-- Navigation -->
  <nav id="navbar">
    <ul>
      <li><a href="#reversibel">1. Reversibel</a></li>
      <li><a href="#entropie">2. Entropie</a></li>
      <li><a href="#energiefluss">3. Energiefluss</a></li>
      <li><a href="#kuehlturm">4. Kühlturm</a></li>
      <li><a href="#alltag">5. Alltag</a></li>
      <li><a href="#traeger">6. Energieträger</a></li>
      <li><a href="#bedarf">7. Bedarf</a></li>
      <li><a href="#infrastruktur">8. Infrastruktur</a></li>
      <li><a href="#wende">9. Wende</a></li>
      <li><a href="#wildpoldsried">10. Wildpoldsried</a></li>
      <li><a href="#doerfer">11. Dörfer</a></li>
      <li><a href="#verbrauch">12. Verbrauch</a></li>
    </ul>
  </nav>

  <!-- Header -->
  <header class="hero">
    <div class="container">
      <h1>Energieversorgung verstehen</h1>
      <p>Interaktive Lernplattform zur Energieumwandlung, Entropie und Energiewende</p>
    </div>
  </header>

  <!-- Hauptinhalt -->
  <div class="container">
    <!-- Abschnitt 1: Reversibel vs. Irreversibel -->
    <section id="reversibel">
      <h2>1. Reversibel vs. Irreversibel</h2>
      <h3>Reversible und irreversible Vorgänge</h3>
      
      <div class="infobox orange">
        <h4>🧠 Einführung: Was bedeutet reversibel und irreversibel?</h4>
        <p>In der Physik beschreibt man viele Prozesse danach, ob sie sich umkehren lassen oder nicht.</p>
        <ul>
          <li>🟢 <strong>Reversibel:</strong> Ein Vorgang ist reversibel, wenn man ihn vollständig rückgängig machen kann – ohne dass dabei Energie verloren geht oder etwas „kaputtgeht".</li>
          <li>🔴 <strong>Irreversibel:</strong> Ein irreversibler Vorgang kann nicht vollständig zurückgeführt werden. Dabei geht oft Energie in Form von Wärme verloren – und es entsteht <em>Entropie</em>, also Unordnung.</li>
          <li>💡 In der Realität sind fast alle Vorgänge <strong>irreversibel</strong>, weil immer etwas Reibung, Wärme oder Verlust entsteht.</li>
        </ul>

        <div class="beispiele">
          <h5>Beispiele:</h5>
          <ul>
            <li>❄️ <strong>Eis schmilzt:</strong> Kann durch Gefrieren rückgängig gemacht werden → reversibel (wenn ideal).</li>
            <li>🔥 <strong>Holz verbrennen:</strong> Die Asche kann nicht zurück in Holz verwandelt werden → irreversibel.</li>
            <li>☕ <strong>Kaffee kühlt ab:</strong> Die Wärme verteilt sich – man kann ihn nicht einfach wieder heiß machen → irreversibel.</li>
          </ul>
        </div>
      </div>

      <p><strong>Jetzt bist du dran:</strong> Ziehe die folgenden Beispiele in die richtige Kategorie.</p>

      <div class="drag-container">
        <div class="drag-items">
          <div class="drag" draggable="true">🍏 Pendel</div>
          <div class="drag" draggable="true">🔥 Verbrennung</div>
          <div class="drag" draggable="true">💡 Blinken</div>
          <div class="drag" draggable="true">❄️ Kompression (langsam)</div>
          <div class="drag" draggable="true">☕ Kaffee kühlt ab</div>
        </div>
        <div class="drop-area">
          <div class="drop-zone" id="zone-reversibel">
            <h4>🔄 Reversibel</h4>
          </div>
          <div class="drop-zone" id="zone-irreversibel">
            <h4>❌ Irreversibel</h4>
          </div>
        </div>
      </div>

      <p class="definition">
        <strong>Reversibel:</strong> Vorgänge, die sich (idealerweise) umkehrbar abspielen, ohne dass dabei Energie verloren geht.<br>
        <strong>Irreversibel:</strong> Vorgänge, bei denen Entropie entsteht und keine vollständige Rückkehr in den Ursprungszustand möglich ist.
      </p>
    </section>

    <!-- Abschnitt 2: Entropie -->
    <section id="entropie">
      <h2>2. Entropie</h2>
      <h3>Entropie und ihre Bedeutung</h3>

      <div class="infobox orange">
        <h4>🌿 Einführung: Was ist Entropie?</h4>
        <p>Entropie beschreibt die <strong>Unordnung</strong> in einem System. Je geordneter die Dinge sind, desto geringer die Entropie – je chaotischer, desto höher die Entropie.</p>
        <p>🔍 <strong>Einfach erklärt:</strong> Stell dir eine Kiste mit vielen farbigen Kugeln vor. Sind alle Kugeln an ihrem Platz sortiert, ist die Entropie niedrig. Wenn du die Kiste schüttelst und die Kugeln sich unkontrolliert verteilen, steigt die Entropie, weil mehr Unordnung entsteht.</p>
        <p>🔬 <strong>Beispiel:</strong> Ein Eiswürfel schmilzt im warmen Raum. Die Moleküle im festen Eis waren sehr geordnet; im geschmolzenen Zustand bewegen sich die Wassermoleküle ungeordnet im Glas – die Entropie steigt.</p>
        <p>⚠️ <strong>2. Hauptsatz der Thermodynamik:</strong> In einem abgeschlossenen System nimmt die Entropie immer zu. Wärme fließt spontan immer von warm nach kalt, wodurch Entropie erzeugt wird.</p>
        <p>➡️ Du siehst also: Entropie ist nichts Mysteriöses, sondern beschreibt genau, wie geordnet oder ungeordnet ein Vorgang abläuft.</p>
      </div>

      <!-- Slider zur Temperaturdifferenz -->
      <div class="slider-box">
        <label for="tempDiff">Temperaturdifferenz (ΔT): <span id="tempDisplay">30</span> °C</label>
        <input type="range" id="tempDiff" min="0" max="100" step="1" value="30">
        <p>Geschätzte Entropiezunahme: <strong><span id="entropieWert">0.10</span> kJ/K</strong></p>
      </div>

      <!-- Quizfrage -->
      <div class="quizbox">
        <p><strong>Quizfrage:</strong> Was beschreibt den 2. Hauptsatz der Thermodynamik?</p>
        <button class="quiz-btn">🔋 Energie bleibt immer erhalten</button>
        <button class="quiz-btn correct">📈 Entropie nimmt in abgeschlossenen Systemen zu</button>
        <button class="quiz-btn">🌡️ Temperatur bleibt konstant</button>
      </div>
    </section>

    <!-- Abschnitt 3: Energieflussdiagramm -->
    <section id="energiefluss">
      <h2>3. Energieflussdiagramm</h2>
      <h3>Energiefluss im Kraftwerk – Interaktiv</h3>

      <div class="infobox orange">
        <h4>🔍 Energiefluss im Überblick</h4>
        <p>In der <strong>Feuerkammer</strong> wird Brennstoff verbrannt und erhitzt Wasser zu <strong>Dampf</strong>. Dieser Dampf treibt die <strong>Turbine</strong> an, welche den <strong>Generator</strong> in Drehung versetzt und so Strom erzeugt. Übrig gebliebener Dampf wird im <strong>Kondensator</strong> wieder zu Wasser – der Kreislauf schließt sich.</p>
      </div>

      <!-- Diagramm -->
      <div style="display: flex; justify-content: space-between; align-items: center; margin: 30px 0;">
        <div style="text-align: center;">
          <button onclick="zeigeDetails('Feuerkammer')" class="quiz-btn">Feuerkammer</button>
          <div style="margin: 15px 0;">➡️</div>
        </div>
        <div style="text-align: center;">
          <button onclick="zeigeDetails('Turbine')" class="quiz-btn">Turbine</button>
          <div style="margin: 15px 0;">➡️</div>
        </div>
        <div style="text-align: center;">
          <button onclick="zeigeDetails('Generator')" class="quiz-btn">Generator</button>
          <div style="margin: 15px 0;">➡️</div>
        </div>
        <div style="text-align: center;">
          <button onclick="zeigeDetails('Kondensator')" class="quiz-btn">Kondensator</button>
        </div>
      </div>

      <!-- Info bei Klick -->
      <div id="details-box" class="infobox green" style="display: none;">
        <p><strong>Details:</strong> <span id="details-text">...</span></p>
      </div>

      <!-- Temperatur-Slider -->
      <div class="slider-box">
        <label for="kesselTemp">Kesseltemperatur (°C): <span id="kesselTempDisplay">500</span></label>
        <input type="range" id="kesselTemp" min="300" max="700" step="10" value="500">
        <p>Wirkungsgrad: <strong><span id="wirkungsgrad">35</span>%</strong><br>
           Elektrische Leistung: <strong><span id="leistung">350</span> MW</strong></p>
      </div>
    </section>

    <!-- Abschnitt 4: Kühlturm -->
    <section id="kuehlturm">
      <h2>4. Kühlturm</h2>
      <h3>Kühlung im Kraftwerksprozess</h3>

      <div class="infobox orange">
        <h4>❄️ Warum ist Kühlung wichtig?</h4>
        <p>Ein Kraftwerk erzeugt nicht nur elektrische Energie – es produziert auch sehr viel <strong>Abwärme</strong>. Diese muss durch Kühlung abgeführt werden, z. B. über einen großen <strong>Kühlturm</strong>. Wird die Kühlung deaktiviert, kann sich das System überhitzen – im schlimmsten Fall: <strong>Explosion!</strong></p>
      </div>

      <!-- Kühlturm-Steuerung -->
      <div class="cooling-control">
        <label>
          <input type="checkbox" id="kuehlungCheckbox" checked>
          💧 Kühlung aktivieren
        </label>
      </div>

      <!-- Temperaturanzeige -->
      <div class="temperaturanzeige">
        <p>Kesseltemperatur: <strong><span id="anzeigeTemp">550</span> °C</strong></p>
        <div class="tempBarContainer">
          <div id="tempFuellung" style="width: 70%;"></div>
        </div>
      </div>

      <!-- Warnung bei Deaktivierung -->
      <div id="explosionswarnung" class="explosion-box" style="display: none;">
        💥 <strong>Achtung!</strong> Die Temperatur steigt unkontrolliert – das System ist instabil!
      </div>
    </section>

    <!-- Abschnitt 5: Entropie im Alltag -->
    <section id="alltag">
      <h2>5. Entropie im Alltag</h2>
      <h3>Wo begegnet uns Entropie?</h3>

      <div class="infobox orange">
        <h4>🔎 Beispiele aus dem Alltag</h4>
        <p>Auch im Alltag begegnet uns Entropie ständig – ob beim Kochen, im Bad oder im Auto.</p>
      </div>

      <!-- Bild + Auswahl -->
      <div class="entropie-alltag-grid">
        <div class="entropie-bild">
          <img src="https://images.unsplash.com/photo-1575425186775-b8de9a427e67?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="Badewanne">
          <p>Badewanne kühlt aus</p>
          <div class="antwort-auswahl">
            <label><input type="radio" name="badewanne" value="reversibel"> Reversibel</label>
            <label><input type="radio" name="badewanne" value="irreversibel"> Irreversibel</label>
          </div>
        </div>

        <div class="entropie-bild">
          <img src="https://images.unsplash.com/photo-1550583724-b2692b85b150?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="Gekochtes Ei">
          <p>Ei wird hart gekocht</p>
          <div class="antwort-auswahl">
            <label><input type="radio" name="ei" value="reversibel"> Reversibel</label>
            <label><input type="radio" name="ei" value="irreversibel"> Irreversibel</label>
          </div>
        </div>

        <div class="entropie-bild">
          <img src="https://images.unsplash.com/photo-1554866585-cd94860890b7?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="Cola-Dose geöffnet">
          <p>Cola-Dose geöffnet</p>
          <div class="antwort-auswahl">
            <label><input type="radio" name="cola" value="reversibel"> Reversibel</label>
            <label><input type="radio" name="cola" value="irreversibel"> Irreversibel</label>
          </div>
        </div>
      </div>

      <!-- Quizauswertung -->
      <button class="quiz-auswerten-btn" onclick="auswertenEntropieAlltag()">Antworten überprüfen</button>
      <div id="feedbackAlltag" class="feedback-box"></div>
    </section>

    <!-- Abschnitt 6: Energieträger -->
    <section id="traeger">
      <h2>6. Energieträger</h2>
      <h3>Ordne die Energieträger ein</h3>

      <div class="infobox orange">
        <h4>🔋 Was sind Energieträger?</h4>
        <p>Energieträger sind Stoffe oder Quellen, die Energie enthalten, die wir nutzen können. Sie lassen sich nach zwei Kriterien einteilen:</p>
        <ul>
          <li><strong>Primär / Sekundär:</strong> Direkt in der Natur vorkommend oder weiterverarbeitet</li>
          <li><strong>Regenerativ / Nicht regenerativ:</strong> Nachhaltig verfügbar oder endlich</li>
        </ul>
      </div>

      <!-- Zuordnungstabelle -->
      <div class="zuordnungs-grid">
        <div class="zuordnungs-kategorie">
          <h4>Primär</h4>
          <div class="checkboxen">
            <label><input type="checkbox" name="primär" value="Erdgas"> Erdgas</label>
            <label><input type="checkbox" name="primär" value="Sonnenlicht"> Sonnenlicht</label>
            <label><input type="checkbox" name="primär" value="Kohle"> Kohle</label>
            <label><input type="checkbox" name="primär" value="Wind"> Wind</label>
          </div>
        </div>

        <div class="zuordnungs-kategorie">
          <h4>Sekundär</h4>
          <div class="checkboxen">
            <label><input type="checkbox" name="sekundär" value="Wasserstoff"> Wasserstoff</label>
            <label><input type="checkbox" name="sekundär" value="Benzin"> Benzin</label>
            <label><input type="checkbox" name="sekundär" value="Strom"> Strom</label>
            <label><input type="checkbox" name="sekundär" value="Fernwärme"> Fernwärme</label>
          </div>
        </div>

        <div class="zuordnungs-kategorie">
          <h4>Regenerativ</h4>
          <div class="checkboxen">
            <label><input type="checkbox" name="regenerativ" value="Wind"> Wind</label>
            <label><input type="checkbox" name="regenerativ" value="Sonnenlicht"> Sonnenlicht</label>
            <label><input type="checkbox" name="regenerativ" value="Holz"> Holz</label>
            <label><input type="checkbox" name="regenerativ" value="Biogas"> Biogas</label>
          </div>
        </div>

        <div class="zuordnungs-kategorie">
          <h4>Nicht regenerativ</h4>
          <div class="checkboxen">
            <label><input type="checkbox" name="nicht-regenerativ" value="Kohle"> Kohle</label>
            <label><input type="checkbox" name="nicht-regenerativ" value="Erdgas"> Erdgas</label>
            <label><input type="checkbox" name="nicht-regenerativ" value="Uran"> Uran</label>
            <label><input type="checkbox" name="nicht-regenerativ" value="Benzin"> Benzin</label>
          </div>
        </div>
      </div>

      <!-- Auswertungsbutton -->
      <button class="quiz-auswerten-btn" onclick="auswertenTraeger()">Antworten überprüfen</button>
      <div id="feedbackTraeger" class="feedback-box"></div>
    </section>

    <!-- Abschnitt 7: Energiebedarf -->
    <section id="bedarf">
      <h2>7. Energiebedarf</h2>
      <h3>Entwicklung des Energieverbrauchs</h3>

      <div class="infobox orange">
        <h4>📈 Wie verändert sich unser Energiebedarf?</h4>
        <p>In Deutschland hat sich der Energiebedarf seit dem 20. Jahrhundert stark verändert – durch Industrie, Verkehr, Haushalte und Digitalisierung. In der Grafik siehst du, wie sich der Verbrauch in verschiedenen Bereichen über die Zeit entwickelt.</p>
      </div>

      <!-- Zeitstrahl / Balkendiagramm -->
      <div class="balkendiagramm-container">
        <div class="jahr-auswahl">
          <label for="jahrSlider">Jahr: <span id="jahrAnzeige">1970</span></label>
          <input type="range" id="jahrSlider" min="1970" max="2020" step="10" value="1970">
        </div>

        <div class="balken">
          <div class="balken-eintrag">
            <span>Haushalte</span>
            <div class="balken">
              <div class="balken-haushalte" style="width: 30%;"></div>
            </div>
            <span id="wertHaushalt">30%</span>
          </div>
          <div class="balken-eintrag">
            <span>Verkehr</span>
            <div class="balken">
              <div class="balken-verkehr" style="width: 25%;"></div>
            </div>
            <span id="wertVerkehr">25%</span>
          </div>
          <div class="balken-eintrag">
            <span>Industrie</span>
            <div class="balken">
              <div class="balken-industrie" style="width: 35%;"></div>
            </div>
            <span id="wertIndustrie">35%</span>
          </div>
          <div class="balken-eintrag">
            <span>Gewerbe</span>
            <div class="balken">
              <div class="balken-gewerbe" style="width: 10%;"></div>
            </div>
            <span id="wertGewerbe">10%</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Abschnitt 8: Infrastruktur -->
    <section id="infrastruktur">
      <h2>8. Strom- und Gasinfrastruktur in Europa</h2>

      <div class="infobox orange">
        <h4>🗺️ Wie sind Strom und Gas vernetzt?</h4>
        <p>Europa ist über Stromtrassen und Gaspipelines eng miteinander verbunden. Du kannst in der Karte unten zwischen beiden Infrastrukturen umschalten.</p>
      </div>

      <!-- Kartenumschalter -->
      <div class="kartenumschalter">
        <label><input type="radio" name="karte" value="strom" checked> 🔌 Stromnetz</label>
        <label><input type="radio" name="karte" value="gas"> 🔥 Gasnetz</label>
      </div>

      <!-- Karte -->
      <div id="europakarte" class="karte"></div>
    </section>

    <!-- Abschnitt 9: Energiewende-Projekte -->
    <section id="wende">
      <h2>9. Energiewende: Projekte in Deutschland</h2>

      <div class="infobox orange">
        <h4>🏗️ Beispielhafte Projekte</h4>
        <p>Viele Städte und Gemeinden setzen auf neue Energiekonzepte. Auf der Karte siehst du einige ausgewählte Orte mit Kurzinfos.</p>
      </div>

      <div id="deutschlandkarte" class="karte"></div>
    </section>

    <!-- Abschnitt 10: Wildpoldsried -->
    <section id="wildpoldsried">
      <h2>10. Wildpoldsried</h2>
      <h3>Beispiel für ein energieautarkes Dorf</h3>

      <div class="infobox green">
        <p>Wildpoldsried in Bayern erzeugt <strong>mehr Energie als es verbraucht</strong> – und das mit Photovoltaik, Biogas, Wind und Wasserkraft. Es gilt als Vorzeigegemeinde der Energiewende.</p>
      </div>

      <img src="https://images.unsplash.com/photo-1508514177221-188b1cf16e9d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80" alt="Luftbild Wildpoldsried" class="bildgross">
    </section>

    <!-- Abschnitt 11: Energiedörfer -->
    <section id="doerfer">
      <h2>11. Weitere Energiedörfer</h2>

      <div class="infobox orange">
        <p>Auch andere Dörfer setzen auf erneuerbare Energien. Klicke auf der Karte auf die Orte und erfahre mehr!</p>
      </div>

      <div id="energiedoerferKarte" class="karte"></div>
    </section>

    <!-- Abschnitt 12: Stromverbrauch-Rechner -->
    <section id="verbrauch">
      <h2>12. Energieverbrauchs-Rechner</h2>
      <h3>Was verbraucht dein Haushalt?</h3>

      <div class="verbrauch-formular">
        <label>
          Anzahl Personen im Haushalt:
          <input type="number" id="personen" min="1" value="3">
        </label>
        <label>
          Geräte im Dauerbetrieb (z. B. Router, Kühlschrank):
          <input type="number" id="dauerbetrieb" value="3">
        </label>
        <label>
          Anzahl Waschladungen pro Woche:
          <input type="number" id="waschen" value="4">
        </label>

        <button onclick="verbrauchBerechnen()">Verbrauch berechnen</button>
      </div>

      <div id="verbrauchErgebnis" class="verbrauch-ausgabe"></div>
    </section>
  </div>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 Lernplattform „Energie verstehen" – Alle Rechte vorbehalten.</p>
  </footer>

  <!-- JavaScript -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // Allgemeine Quiz-Buttons
    document.querySelectorAll('.quizbox').forEach(quizbox => {
      const buttons = quizbox.querySelectorAll('.quiz-btn');
      
      buttons.forEach(btn => {
        btn.addEventListener('click', () => {
          buttons.forEach(b => b.disabled = true);
          
          if (btn.classList.contains('correct')) {
            btn.classList.add('correct');
            btn.innerHTML += ' ✅';
          } else {
            btn.classList.add('incorrect');
            btn.innerHTML += ' ❌';
          }
        });
      });
    });
    
    // Entropie-Slider
    const tempSlider = document.getElementById('tempDiff');
    const tempDisplay = document.getElementById('tempDisplay');
    const entropieWert = document.getElementById('entropieWert');
    
    tempSlider.addEventListener('input', () => {
      const deltaT = parseInt(tempSlider.value);
      tempDisplay.textContent = deltaT;
      
      const entropie = (deltaT * 0.0034).toFixed(2);
      entropieWert.textContent = entropie;
    });
    
    // Kühlturm-Simulation
    const kuehlung = document.getElementById('kuehlungCheckbox');
    const tempAnzeige = document.getElementById('anzeigeTemp');
    const tempFuellung = document.getElementById('tempFuellung');
    const explosion = document.getElementById('explosionswarnung');
    
    let aktuelleTemp = 550;
    let temperaturTimer = null;
    
    function updateTempAnzeige() {
      tempAnzeige.textContent = aktuelleTemp;
      let prozent = Math.min(100, (aktuelleTemp - 300) / 4);
      tempFuellung.style.width = `${prozent}%`;
      
      if (aktuelleTemp >= 700) {
        explosion.style.display = 'block';
      } else {
        explosion.style.display = 'none';
      }
    }
    
    function startenTempSimulation() {
      if (temperaturTimer) clearInterval(temperaturTimer);
      
      temperaturTimer = setInterval(() => {
        if (kuehlung.checked) {
          aktuelleTemp = Math.max(300, aktuelleTemp - 2);
        } else {
          aktuelleTemp += 5;
        }
        updateTempAnzeige();
      }, 300);
    }
    
    kuehlung.addEventListener('change', startenTempSimulation);
    startenTempSimulation();
    
    // Energiefluss-Details
    function zeigeDetails(teil) {
      const detailsBox = document.getElementById('details-box');
      const detailsText = document.getElementById('details-text');
      
      const infoTexte = {
        "Feuerkammer": "Hier wird Brennstoff (z.B. Kohle oder Gas) verbrannt, um Wasser zu erhitzen und Dampf zu erzeugen. Temperaturen von 500-600°C sind typisch.",
        "Turbine": "Der heiße Dampf trifft mit hohem Druck auf die Turbinenschaufeln und setzt sie in Rotation. Die thermische Energie wird in mechanische Energie umgewandelt.",
        "Generator": "Die rotierende Turbine treibt den Generator an, der durch elektromagnetische Induktion die mechanische Energie in elektrische Energie umwandelt.",
        "Kondensator": "Der Dampf wird durch Kühlwasser abgekühlt und kondensiert zurück zu Wasser, das wieder in den Kreislauf eingespeist wird. Dabei geht Wärmeenergie verloren."
      };
      
      detailsText.textContent = infoTexte[teil] || "Keine Informationen verfügbar.";
      detailsBox.style.display = "block";
    }
    
    // Kesseltemperatur-Slider
    const kesselSlider = document.getElementById('kesselTemp');
    kesselSlider.addEventListener('input', function() {
      const temp = parseInt(this.value);
      document.getElementById('kesselTempDisplay').textContent = temp;
      
      // Einfache Berechnung für Wirkungsgrad und Leistung
      const wirkungsgrad = Math.round(25 + (temp - 300) * 0.05);
      const leistung = Math.round(200 + (temp - 300) * 0.75);
      
      document.getElementById('wirkungsgrad').textContent = wirkungsgrad;
      document.getElementById('leistung').textContent = leistung;
    });
    
    // Drag & Drop
    document.querySelectorAll('.drag').forEach(dragItem => {
      dragItem.addEventListener('dragstart', e => {
        e.dataTransfer.setData('text/plain', dragItem.textContent);
      });
    });
    
    document.querySelectorAll('.drop-zone').forEach(zone => {
      zone.addEventListener('dragover', e => {
        e.preventDefault();
        zone.classList.add('highlight');
      });
      
      zone.addEventListener('dragleave', () => {
        zone.classList.remove('highlight');
      });
      
      zone.addEventListener('drop', e => {
        e.preventDefault();
        zone.classList.remove('highlight');
        
        const data = e.dataTransfer.getData('text/plain');
        const neuesElement = document.createElement('div');
        neuesElement.textContent = data;
        neuesElement.classList.add('drag-result');
        zone.appendChild(neuesElement);
      });
    });
    
    // Entropie im Alltag Auswertung
    function auswertenEntropieAlltag() {
      const richtig = {
        badewanne: 'irreversibel',
        ei: 'irreversibel',
        cola: 'irreversibel'
      };
      
      let punkte = 0;
      for (let key in richtig) {
        const antwort = document.querySelector(`input[name="${key}"]:checked`);
        if (antwort && antwort.value === richtig[key]) {
          punkte++;
        }
      }
      
      const ausgabe = document.getElementById('feedbackAlltag');
      ausgabe.textContent = `Du hast ${punkte} von 3 richtig.`;
      
      if (punkte === 3) {
        ausgabe.className = 'feedback-box feedback-correct';
      } else {
        ausgabe.className = 'feedback-box feedback-incorrect';
      }
    }
    
    // Energieträger Auswertung
    function auswertenTraeger() {
      const korrekt = {
        'primär': ['Erdgas', 'Sonnenlicht', 'Kohle', 'Wind'],
        'sekundär': ['Wasserstoff', 'Benzin', 'Strom', 'Fernwärme'],
        'regenerativ': ['Wind', 'Sonnenlicht', 'Holz', 'Biogas'],
        'nicht-regenerativ': ['Kohle', 'Erdgas', 'Uran', 'Benzin']
      };
      
      let fehler = 0;
      
      for (let gruppe in korrekt) {
        const angeklickt = Array.from(document.querySelectorAll(`input[name="${gruppe}"]:checked`)).map(e => e.value);
        const richtig = korrekt[gruppe];
        
        const zuViele = angeklickt.filter(a => !richtig.includes(a));
        const zuWenig = richtig.filter(r => !angeklickt.includes(r));
        
        if (zuViele.length > 0 || zuWenig.length > 0) fehler++;
      }
      
      const feedback = document.getElementById('feedbackTraeger');
      feedback.textContent = fehler === 0 ? 'Alles korrekt! ✅' : `${fehler} Kategorien enthalten Fehler. ❌`;
      
      if (fehler === 0) {
        feedback.className = 'feedback-box feedback-correct';
      } else {
        feedback.className = 'feedback-box feedback-incorrect';
      }
    }
    
    // Energiebedarf Slider
    const jahresDaten = {
      1970: { haushalt: 30, verkehr: 25, industrie: 35, gewerbe: 10 },
      1980: { haushalt: 28, verkehr: 27, industrie: 32, gewerbe: 13 },
      1990: { haushalt: 25, verkehr: 30, industrie: 30, gewerbe: 15 },
      2000: { haushalt: 22, verkehr: 32, industrie: 28, gewerbe: 18 },
      2010: { haushalt: 20, verkehr: 33, industrie: 27, gewerbe: 20 },
      2020: { haushalt: 18, verkehr: 35, industrie: 25, gewerbe: 22 }
    };
    
    const jahrSlider = document.getElementById('jahrSlider');
    jahrSlider.addEventListener('input', function() {
      const jahr = this.value;
      const daten = jahresDaten[jahr];
      
      document.getElementById('jahrAnzeige').textContent = jahr;
      
      // Balken aktualisieren
      document.querySelector('.balken-haushalte').style.width = daten.haushalt + '%';
      document.querySelector('.balken-verkehr').style.width = daten.verkehr + '%';
      document.querySelector('.balken-industrie').style.width = daten.industrie + '%';
      document.querySelector('.balken-gewerbe').style.width = daten.gewerbe + '%';
      
      // Werte aktualisieren
      document.getElementById('wertHaushalt').textContent = daten.haushalt + '%';
      document.getElementById('wertVerkehr').textContent = daten.verkehr + '%';
      document.getElementById('wertIndustrie').textContent = daten.industrie + '%';
      document.getElementById('wertGewerbe').textContent = daten.gewerbe + '%';
    });
    
    // Initialisierung des Sliders
    jahrSlider.dispatchEvent(new Event('input'));
    
    // Verbrauchsrechner
    function verbrauchBerechnen() {
      const personen = parseInt(document.getElementById('personen').value) || 0;
      const dauerbetrieb = parseInt(document.getElementById('dauerbetrieb').value) || 0;
      const waschen = parseInt(document.getElementById('waschen').value) || 0;
      
      // Einfache Beispielberechnung (kWh pro Jahr)
      const grundbedarf = personen * 500;
      const dauerstrom = dauerbetrieb * 80;
      const waschstrom = waschen * 0.8 * 52; // wöchentlich
      
      const gesamt = grundbedarf + dauerstrom + waschstrom;
      
      const ausgabe = document.getElementById('verbrauchErgebnis');
      ausgabe.innerHTML = `
        <p><strong>Dein geschätzter Stromverbrauch:</strong></p>
        <p>${gesamt.toFixed(0)} kWh pro Jahr</p>
        <p>Das entspricht etwa ${Math.round(gesamt / 1500)} vollen Waschmaschinenladungen.</p>
      `;
    }
    
    // Karten initialisieren
    // Europakarte
    const europaKarte = L.map('europakarte').setView([52, 10], 4);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(europaKarte);
    
    // Beispielhafte Strom- und Gasnetze
    const stromLayer = L.layerGroup([
      L.polyline([[55, 8], [50, 8], [48, 11], [52, 13], [55, 12]], {color: 'red', weight: 3}),
      L.polyline([[48, 2], [50, 5], [52, 7]], {color: 'red', weight: 3})
    ]).addTo(europaKarte);
    
    const gasLayer = L.layerGroup([
      L.polyline([[60, 15], [55, 12], [52, 10], [50, 8], [48, 5]], {color: 'blue', weight: 3}),
      L.polyline([[45, 10], [48, 12], [52, 13]], {color: 'blue', weight: 3})
    ]);
    
    // Kartenumschalter
    document.querySelectorAll('input[name="karte"]').forEach(radio => {
      radio.addEventListener('change', e => {
        if (e.target.value === 'strom') {
          europaKarte.removeLayer(gasLayer);
          europaKarte.addLayer(stromLayer);
        } else {
          europaKarte.removeLayer(stromLayer);
          europaKarte.addLayer(gasLayer);
        }
      });
    });
    
    // Deutschlandkarte mit Projekten
    const deutschlandKarte = L.map('deutschlandkarte').setView([51, 10], 6);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(deutschlandKarte);
    
    const projekte = [
      {name: "Wildpoldsried", coords: [47.766, 10.4], info: "Energieautarkes Dorf in Bayern mit 500% erneuerbarer Energie"},
      {name: "Feldheim", coords: [52.083, 12.533], info: "Erstes energieautarkes Dorf Deutschlands"},
      {name: "Bürgerwindpark", coords: [53.55, 9.0], info: "Gemeinschaftlicher Windpark in Norddeutschland"},
      {name: "Solarstadt", coords: [49.5, 8.5], info: "Modellstadt mit flächendeckender Solarenergienutzung"}
    ];
    
    projekte.forEach(projekt => {
      L.marker(projekt.coords)
        .addTo(deutschlandKarte)
        .bindPopup(`<strong>${projekt.name}</strong><br>${projekt.info}`);
    });
    
    // Energiedörfer-Karte
    const dorfKarte = L.map('energiedoerferKarte').setView([51, 10], 6);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(dorfKarte);
    
    const orte = [
      {name: "Wildpoldsried", coords: [47.766, 10.4], info: "Erzeugt 500% seines Bedarfs aus Erneuerbaren"},
      {name: "Feldheim", coords: [52.083, 12.533], info: "100% energieautark seit 2010"},
      {name: "Jühnde", coords: [51.45, 9.8], info: "Deutschlands erstes Bioenergiedorf"},
      {name: "Mauel", coords: [50.066, 6.4], info: "Eifeldorf mit innovativem Energiekonzept"}
    ];
    
    orte.forEach(ort => {
      L.marker(ort.coords)
        .addTo(dorfKarte)
        .bindPopup(`<strong>${ort.name}</strong><br>${ort.info}`);
    });
  </script>
</body>
</html>
